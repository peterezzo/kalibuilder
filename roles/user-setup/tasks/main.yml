---
- name: set authorized key for remote user, copying it from current user
  authorized_key:
    user: "{{ ansible_user }}"
    state: present
    key: "{{ lookup('file', lookup('env','HOME') + '/.ssh/id_ed25519.pub') }}"

- name: set sudo group to not require password
  copy:
    src: sudo-nopw
    dest: /etc/sudoers.d/sudo-nopw
    validate: /usr/sbin/visudo -cf %s
  vars:
    ansible_become: yes

- name: set bash profile
  copy:
    src: profile
    dest: "~/.profile"
    backup: yes

- name: set bashrc
  copy:
    src: bashrc
    dest: "~/.bashrc"
    backup: yes

- name: set vimrc
  copy:
    src: vimrc
    dest: "~/.vimrc"
    backup: yes
